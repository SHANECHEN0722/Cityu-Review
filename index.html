<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CityU Review Hub</title>
    <link rel="stylesheet" href="styles.css?v=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+HK:wght@700&display=swap" rel="stylesheet">

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
        <script src="data.js?v=20251212" defer></script>
        <script src="script.js?v=20251212" defer></script>
</head>
<body>

    <div id="canvas-container"></div>
    
    <div class="header-overlay"></div>

    <div class="container">
        <header class="header">
            <div class="badge">
                <span class="status-dot"></span>
                Review Resources
            </div>
            
            <h1 class="cityu-title">
                CityU <span class="highlight">Review Hub</span>
            </h1>
            <p class="subtitle">香港城市大学学习资源导航</p>
            
            <div class="degree-selector">
                <div class="segment-control">
                    <input type="radio" name="degree" id="ug" value="ug" checked hidden>
                    <label for="ug">Undergraduate</label>
                    
                    <input type="radio" name="degree" id="pg" value="pg" hidden>
                    <label for="pg">Postgraduate</label>
                    
                    <div class="segment-indicator"></div>
                </div>
            </div>

            <div class="search-wrapper">
                <div class="search-input-group">
                    <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <input type="text" id="searchInput" placeholder="Search for schools or majors..." autocomplete="off">
                </div>
                <a href="https://github.com/SHANECHEN0722/cityu-review-template" target="_blank" class="contribute-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                    Contribute Resources
                </a>
            </div>
        </header>

        <main>
            <div id="schoolsContainer" class="grid-layout"></div>

            <div id="majorsContainer" style="display: none;">
                <div class="section-header">
                        <button class="nav-btn back-btn" id="backBtn" type="button" onclick="backToSchools()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                        Back
                    </button>
                    <h2 id="selectedSchoolName">School Name</h2>
                </div>
                <div id="majorsList" class="grid-layout"></div>
            </div>
        </main>
        
        <footer class="footer">
            <div class="footer-logo">CityU Review Hub</div>
            <p>Designed for City University of Hong Kong Students</p>
        </footer>
    </div>

        <script src="data.js?v=20251212" defer></script>
        <script src="script.js?v=20251212" defer></script>

    <script type="module">
        import * as THREE from 'three';
        import { FontLoader } from 'three/addons/loaders/FontLoader.js';
        import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';

        const container = document.getElementById('canvas-container');
        
        // 场景
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.02);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 35);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        container.appendChild(renderer.domElement);

        // 灯光：冷白光，强调科技感
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const dirLight = new THREE.DirectionalLight(0xffffff, 1.2); // 纯白主光
        dirLight.position.set(10, 10, 20);
        dirLight.castShadow = true;
        scene.add(dirLight);

        // 轮廓光：微弱的红色氛围
        const rimLight = new THREE.SpotLight(0x850029, 15);
        rimLight.position.set(-20, 10, -10);
        rimLight.lookAt(0, 0, 0);
        scene.add(rimLight);

        // 底部补光：冷银色
        const bottomLight = new THREE.PointLight(0xaaaaaa, 2);
        bottomLight.position.set(0, -10, 5);
        scene.add(bottomLight);

        const loader = new FontLoader();
        loader.load('https://unpkg.com/three@0.160.0/examples/fonts/helvetiker_bold.typeface.json', function (font) {
            
            const geometry = new TextGeometry('CityU', {
                font: font,
                size: 10,
                height: 1.2,
                curveSegments: 12,
                bevelEnabled: true,
                bevelThickness: 0.1,
                bevelSize: 0.06,
                bevelOffset: 0,
                bevelSegments: 5
            });

            geometry.computeBoundingBox();
            const xOffset = -0.5 * (geometry.boundingBox.max.x - geometry.boundingBox.min.x);
            const yOffset = -0.5 * (geometry.boundingBox.max.y - geometry.boundingBox.min.y);
            geometry.translate(xOffset, yOffset, 0);

            // 材质：正面红 (磨砂)
            const matFront = new THREE.MeshPhysicalMaterial({
                color: 0x7a0019, // Deep Burgundy
                roughness: 0.4,
                metalness: 0.2,
                clearcoat: 0.8
            });

            // 侧面：深银色 (金属) - 告别黄色
            const matSide = new THREE.MeshStandardMaterial({
                color: 0x444444, // Dark Silver
                roughness: 0.3,
                metalness: 0.8
            });

            const textMesh = new THREE.Mesh(geometry, [matFront, matSide]);
            textMesh.position.y = -1;
            scene.add(textMesh);

            let mouseX = 0;
            let mouseY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX - window.innerWidth / 2) * 0.0003;
                mouseY = (e.clientY - window.innerHeight / 2) * 0.0003;
            });

            function animate() {
                requestAnimationFrame(animate);
                
                textMesh.position.y = -1 + Math.sin(Date.now() * 0.001) * 0.3;
                
                // 鼠标交互
                textMesh.rotation.y += (mouseX - textMesh.rotation.y) * 0.08;
                textMesh.rotation.x += (mouseY - textMesh.rotation.x) * 0.08;

                renderer.render(scene, camera);
            }
            animate();
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>